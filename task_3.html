<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="./css/styles.css">
  <title>Document</title>
</head>

<body>

  <a href="./task_1.html">Задание 1</a><br>
  <a href="./task_2.html">Задание 2</a><br>
  <H2><a href="./task_3.html">Задание 3</a></H2>
<br>
<br>
<br>


    <div>
    
      <p>
Перепиши функцию <i>makeTransaction()</i> так, чтобы она не использовала callback-функции <i>onSuccess</i> и <i>onError</i>, а принимала
всего один параметр <i>transaction</i> и возвращала промис.
      </p>
    
      <pre class="code">
      const randomIntegerFromInterval = (min, max) => {
      return Math.floor(Math.random() * (max - min + 1) + min);
      };
      
      const makeTransaction = (transaction, onSuccess, onError) => {
      const delay = randomIntegerFromInterval(200, 500);
      
      setTimeout(() => {
      const canProcess = Math.random() > 0.3;
      
      if (canProcess) {
      onSuccess(transaction.id, delay);
      } else {
      onError(transaction.id);
      }
      }, delay);
      };
      
      const logSuccess = (id, time) => {
      console.log(`Transaction ${id} processed in ${time}ms`);
      };
      
      const logError = id => {
      console.warn(`Error processing transaction ${id}. Please try again later.`);
      };
      
      /*
      * Работает так
      */
      makeTransaction({ id: 70, amount: 150 }, logSuccess, logError);
      makeTransaction({ id: 71, amount: 230 }, logSuccess, logError);
      makeTransaction({ id: 72, amount: 75 }, logSuccess, logError);
      makeTransaction({ id: 73, amount: 100 }, logSuccess, logError);
      /*
      * Должно работать так
      */
      makeTransaction({ id: 70, amount: 150 })
      .then(logSuccess)
      .catch(logError);
      
      makeTransaction({ id: 71, amount: 230 })
      .then(logSuccess)
      .catch(logError);
      
      makeTransaction({ id: 72, amount: 75 })
      .then(logSuccess)
      .catch(logError);
      
      makeTransaction({ id: 73, amount: 100 })
      .then(logSuccess)
      .catch(logError);
      </pre>
    </div>

  <script src="./js/task_3.js"></script>
</body>

</html>